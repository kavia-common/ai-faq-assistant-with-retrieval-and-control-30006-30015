{"is_source_file": true, "format": "TypeScript", "description": "Angular component implementing a chatbox interface for an AI FAQ assistant, managing user input, topic updates via services, message filtering, and interactions with backend services.", "external_files": ["./chatbox.component.html", "./chatbox.component.css"], "external_methods": ["this.rag.ask", "this.topicsBridge.topic$.subscribe"], "published": [], "classes": [{"name": "ChatboxComponent", "description": "Angular component providing user interaction with AI FAQ assistant, including message management, input filtering, and topic updates."}], "methods": [{"name": "private filterInput(raw: string): { cleaned: string | null; feedback?: string } { filterInput", "description": "Sanitizes and filters user input, masking banned words and normalizing whitespace.", "scope": "ChatboxComponent", "scopeKind": "class"}, {"name": "async send() { send", "description": "Handles sending user message, manages UI state, and appends responses from the rag service.", "scope": "ChatboxComponent", "scopeKind": "class"}, {"name": "clear() { clear", "description": "Resets the chat conversation to initial state.", "scope": "ChatboxComponent", "scopeKind": "class"}, {"name": "ngOnDestroy(): void { ngOnDestroy", "description": "Unsubscribes from topic updates when component is destroyed.", "scope": "ChatboxComponent", "scopeKind": "class"}, {"name": "constructor( constructor", "scope": "ChatboxComponent", "scopeKind": "class", "description": "unavailable"}], "calls": ["this.rag.ask", "this.topicsBridge.topic$.subscribe", "g.requestAnimationFrame", "g.setTimeout", "d.querySelector"], "search-terms": ["Angular chatbox component", "RagService interaction", "topic update subscription", "message filtering", "UI message state management"], "state": 2, "file_id": 30, "knowledge_revision": 89, "git_revision": "7c498a08d76dbab3cffecb73c11abf1e6e8c58a0", "revision_history": [{"66": ""}, {"84": ""}, {"87": ""}, {"89": "7c498a08d76dbab3cffecb73c11abf1e6e8c58a0"}], "ctags": [{"_type": "tag", "name": "ChatboxComponent", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-retrieval-and-control-30006-30015/faq_chatbox_frontend/src/app/chat/chatbox.component.ts", "pattern": "/^export class ChatboxComponent implements OnDestroy {$/", "language": "TypeScript", "kind": "class"}, {"_type": "tag", "name": "activeTopic", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-retrieval-and-control-30006-30015/faq_chatbox_frontend/src/app/chat/chatbox.component.ts", "pattern": "/^  private activeTopic: string | null = null;$/", "language": "TypeScript", "kind": "property", "scope": "ChatboxComponent", "scopeKind": "class"}, {"_type": "tag", "name": "cleaned", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-retrieval-and-control-30006-30015/faq_chatbox_frontend/src/app/chat/chatbox.component.ts", "pattern": "/^    const { cleaned, feedback } = this.filterInput(this.input);$/", "language": "TypeScript", "kind": "constant", "scope": "ChatboxComponent.send", "scopeKind": "method"}, {"_type": "tag", "name": "clear", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-retrieval-and-control-30006-30015/faq_chatbox_frontend/src/app/chat/chatbox.component.ts", "pattern": "/^  clear() {$/", "language": "TypeScript", "kind": "method", "scope": "ChatboxComponent", "scopeKind": "class"}, {"_type": "tag", "name": "constructor", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-retrieval-and-control-30006-30015/faq_chatbox_frontend/src/app/chat/chatbox.component.ts", "pattern": "/^  constructor($/", "language": "TypeScript", "kind": "method", "scope": "ChatboxComponent", "scopeKind": "class"}, {"_type": "tag", "name": "d", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-retrieval-and-control-30006-30015/faq_chatbox_frontend/src/app/chat/chatbox.component.ts", "pattern": "/^          const d: any = (globalThis as any).document;$/", "language": "TypeScript", "kind": "constant", "scope": "ChatboxComponent.send", "scopeKind": "method"}, {"_type": "tag", "name": "d", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-retrieval-and-control-30006-30015/faq_chatbox_frontend/src/app/chat/chatbox.component.ts", "pattern": "/^          const list = d && typeof d.querySelector === 'function' ? d.querySelector('.messages')/", "language": "TypeScript", "kind": "constant", "scope": "ChatboxComponent.send", "scopeKind": "method"}, {"_type": "tag", "name": "feedback", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-retrieval-and-control-30006-30015/faq_chatbox_frontend/src/app/chat/chatbox.component.ts", "pattern": "/^    const { cleaned, feedback } = this.filterInput(this.input);$/", "language": "TypeScript", "kind": "constant", "scope": "ChatboxComponent.send", "scopeKind": "method"}, {"_type": "tag", "name": "filterFeedback", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-retrieval-and-control-30006-30015/faq_chatbox_frontend/src/app/chat/chatbox.component.ts", "pattern": "/^  filterFeedback: string | null = null;$/", "language": "TypeScript", "kind": "property", "scope": "ChatboxComponent", "scopeKind": "class"}, {"_type": "tag", "name": "filterInput", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-retrieval-and-control-30006-30015/faq_chatbox_frontend/src/app/chat/chatbox.component.ts", "pattern": "/^  private filterInput(raw: string): { cleaned: string | null; feedback?: string } {$/", "language": "TypeScript", "kind": "method", "scope": "ChatboxComponent", "scopeKind": "class"}, {"_type": "tag", "name": "g", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-retrieval-and-control-30006-30015/faq_chatbox_frontend/src/app/chat/chatbox.component.ts", "pattern": "/^        const g: any = globalThis as any;$/", "language": "TypeScript", "kind": "constant", "scope": "ChatboxComponent.send", "scopeKind": "method"}, {"_type": "tag", "name": "input", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-retrieval-and-control-30006-30015/faq_chatbox_frontend/src/app/chat/chatbox.component.ts", "pattern": "/^  input = '';$/", "language": "TypeScript", "kind": "property", "scope": "ChatboxComponent", "scopeKind": "class"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-retrieval-and-control-30006-30015/faq_chatbox_frontend/src/app/chat/chatbox.component.ts", "pattern": "/^          const list = d && typeof d.querySelector === 'function' ? d.querySelector('.messages')/", "language": "TypeScript", "kind": "constant", "scope": "ChatboxComponent.send", "scopeKind": "method"}, {"_type": "tag", "name": "messages", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-retrieval-and-control-30006-30015/faq_chatbox_frontend/src/app/chat/chatbox.component.ts", "pattern": "/^  messages: ChatMessage[] = [$/", "language": "TypeScript", "kind": "property", "scope": "ChatboxComponent", "scopeKind": "class"}, {"_type": "tag", "name": "ngOnDestroy", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-retrieval-and-control-30006-30015/faq_chatbox_frontend/src/app/chat/chatbox.component.ts", "pattern": "/^  ngOnDestroy(): void {$/", "language": "TypeScript", "kind": "method", "scope": "ChatboxComponent", "scopeKind": "class"}, {"_type": "tag", "name": "platformId", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-retrieval-and-control-30006-30015/faq_chatbox_frontend/src/app/chat/chatbox.component.ts", "pattern": "/^    @Inject(PLATFORM_ID) private platformId: Object$/", "language": "TypeScript", "kind": "property", "scope": "ChatboxComponent", "scopeKind": "class"}, {"_type": "tag", "name": "raf", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-retrieval-and-control-30006-30015/faq_chatbox_frontend/src/app/chat/chatbox.component.ts", "pattern": "/^        const raf: (cb: () => void) => void =$/", "language": "TypeScript", "kind": "constant", "scope": "ChatboxComponent.send", "scopeKind": "method"}, {"_type": "tag", "name": "rag", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-retrieval-and-control-30006-30015/faq_chatbox_frontend/src/app/chat/chatbox.component.ts", "pattern": "/^    private rag: RagService,$/", "language": "TypeScript", "kind": "property", "scope": "ChatboxComponent", "scopeKind": "class"}, {"_type": "tag", "name": "response", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-retrieval-and-control-30006-30015/faq_chatbox_frontend/src/app/chat/chatbox.component.ts", "pattern": "/^      const response = await this.rag.ask(cleaned, { topic: this.activeTopic ?? undefined });$/", "language": "TypeScript", "kind": "constant", "scope": "ChatboxComponent.send", "scopeKind": "method"}, {"_type": "tag", "name": "send", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-retrieval-and-control-30006-30015/faq_chatbox_frontend/src/app/chat/chatbox.component.ts", "pattern": "/^  async send() {$/", "language": "TypeScript", "kind": "method", "scope": "ChatboxComponent", "scopeKind": "class"}, {"_type": "tag", "name": "sending", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-retrieval-and-control-30006-30015/faq_chatbox_frontend/src/app/chat/chatbox.component.ts", "pattern": "/^  sending = false;$/", "language": "TypeScript", "kind": "property", "scope": "ChatboxComponent", "scopeKind": "class"}, {"_type": "tag", "name": "showMaskNote", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-retrieval-and-control-30006-30015/faq_chatbox_frontend/src/app/chat/chatbox.component.ts", "pattern": "/^    const showMaskNote = !!feedback && \\/masked\\/i.test(feedback);$/", "language": "TypeScript", "kind": "constant", "scope": "ChatboxComponent.send", "scopeKind": "method"}, {"_type": "tag", "name": "sub", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-retrieval-and-control-30006-30015/faq_chatbox_frontend/src/app/chat/chatbox.component.ts", "pattern": "/^  private sub: any;$/", "language": "TypeScript", "kind": "property", "scope": "ChatboxComponent", "scopeKind": "class"}, {"_type": "tag", "name": "topicsBridge", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-retrieval-and-control-30006-30015/faq_chatbox_frontend/src/app/chat/chatbox.component.ts", "pattern": "/^    private topicsBridge: TopicsBridgeService,$/", "language": "TypeScript", "kind": "property", "scope": "ChatboxComponent", "scopeKind": "class"}], "hash": "ecbec33565e9f6523d8d4068ce935608", "format-version": 4, "code-base-name": "faq_chatbox_frontend", "filename": "faq_chatbox_frontend/src/app/chat/chatbox.component.ts", "fields": [{"name": "private activeTopic: string | null = null;", "scope": "ChatboxComponent", "scopeKind": "class", "description": "unavailable"}, {"name": "filterFeedback: string | null = null;", "scope": "ChatboxComponent", "scopeKind": "class", "description": "unavailable"}, {"name": "input = '';", "scope": "ChatboxComponent", "scopeKind": "class", "description": "unavailable"}, {"name": "messages: ChatMessage[] = [", "scope": "ChatboxComponent", "scopeKind": "class", "description": "unavailable"}, {"name": "@Inject(PLATFORM_ID) private platformId: Object", "scope": "ChatboxComponent", "scopeKind": "class", "description": "unavailable"}, {"name": "private rag: RagService,", "scope": "ChatboxComponent", "scopeKind": "class", "description": "unavailable"}, {"name": "sending = false;", "scope": "ChatboxComponent", "scopeKind": "class", "description": "unavailable"}, {"name": "private sub: any;", "scope": "ChatboxComponent", "scopeKind": "class", "description": "unavailable"}, {"name": "private topicsBridge: TopicsBridgeService,", "scope": "ChatboxComponent", "scopeKind": "class", "description": "unavailable"}]}