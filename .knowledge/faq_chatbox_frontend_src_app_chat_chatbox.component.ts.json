{"is_source_file": true, "format": "TypeScript", "description": "This file defines an Angular component called ChatboxComponent that manages the user interface for a chat-based AI FAQ assistant. It handles user input, displays messages, interacts with RAG and TopicBridge services, and manages lifecycle events.", "external_files": ["../core/rag.service", "../core/topics-bridge.service", "./chatbox.component.html", "./chatbox.component.css"], "external_methods": ["RagService.ask", "TopicsBridgeService.topic$.subscribe", "isPlatformBrowser", "globalThis.requestAnimationFrame", "globalThis.setTimeout", "document.querySelector", "console.error"], "published": ["ChatboxComponent"], "classes": [{"name": "ChatboxComponent", "description": "Angular component managing the chat interface with the AI FAQ assistant, including message handling, topic updates, and lifecycle management."}], "methods": [{"name": "async send() { send", "description": "Handles user message submission, sends it to the RAG service, updates message list, and manages UI scroll behavior.", "scope": "ChatboxComponent", "scopeKind": "class"}, {"name": "clear() { clear", "description": "Resets the conversation, starting a new chat session.", "scope": "ChatboxComponent", "scopeKind": "class"}, {"name": "ngOnDestroy(): void { ngOnDestroy", "description": "Cleans up subscriptions when the component is destroyed.", "scope": "ChatboxComponent", "scopeKind": "class"}, {"name": "constructor( constructor", "scope": "ChatboxComponent", "scopeKind": "class", "description": "unavailable"}], "calls": ["this.rag.ask", "this.topicsBridge.topic$.subscribe", "isPlatformBrowser", "globalThis.requestAnimationFrame", "globalThis.setTimeout", "document.querySelector", "this.sub.unsubscribe"], "search-terms": ["ChatboxComponent", "Angular chat UI", "AI FAQ assistant", "RAG service interaction", "topic update subscription", "scroll chat bottom"], "state": 2, "file_id": 30, "knowledge_revision": 87, "git_revision": "", "revision_history": [{"66": ""}, {"84": ""}, {"87": ""}], "ctags": [{"_type": "tag", "name": "ChatboxComponent", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-retrieval-and-control-30006-30015/faq_chatbox_frontend/src/app/chat/chatbox.component.ts", "pattern": "/^export class ChatboxComponent implements OnDestroy {$/", "language": "TypeScript", "kind": "class"}, {"_type": "tag", "name": "activeTopic", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-retrieval-and-control-30006-30015/faq_chatbox_frontend/src/app/chat/chatbox.component.ts", "pattern": "/^  private activeTopic: string | null = null;$/", "language": "TypeScript", "kind": "property", "scope": "ChatboxComponent", "scopeKind": "class"}, {"_type": "tag", "name": "clear", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-retrieval-and-control-30006-30015/faq_chatbox_frontend/src/app/chat/chatbox.component.ts", "pattern": "/^  clear() {$/", "language": "TypeScript", "kind": "method", "scope": "ChatboxComponent", "scopeKind": "class"}, {"_type": "tag", "name": "constructor", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-retrieval-and-control-30006-30015/faq_chatbox_frontend/src/app/chat/chatbox.component.ts", "pattern": "/^  constructor($/", "language": "TypeScript", "kind": "method", "scope": "ChatboxComponent", "scopeKind": "class"}, {"_type": "tag", "name": "d", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-retrieval-and-control-30006-30015/faq_chatbox_frontend/src/app/chat/chatbox.component.ts", "pattern": "/^          const d: any = (globalThis as any).document;$/", "language": "TypeScript", "kind": "constant", "scope": "ChatboxComponent.send", "scopeKind": "method"}, {"_type": "tag", "name": "d", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-retrieval-and-control-30006-30015/faq_chatbox_frontend/src/app/chat/chatbox.component.ts", "pattern": "/^          const list = d && typeof d.querySelector === 'function' ? d.querySelector('.messages')/", "language": "TypeScript", "kind": "constant", "scope": "ChatboxComponent.send", "scopeKind": "method"}, {"_type": "tag", "name": "g", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-retrieval-and-control-30006-30015/faq_chatbox_frontend/src/app/chat/chatbox.component.ts", "pattern": "/^        const g: any = globalThis as any;$/", "language": "TypeScript", "kind": "constant", "scope": "ChatboxComponent.send", "scopeKind": "method"}, {"_type": "tag", "name": "input", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-retrieval-and-control-30006-30015/faq_chatbox_frontend/src/app/chat/chatbox.component.ts", "pattern": "/^  input = '';$/", "language": "TypeScript", "kind": "property", "scope": "ChatboxComponent", "scopeKind": "class"}, {"_type": "tag", "name": "list", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-retrieval-and-control-30006-30015/faq_chatbox_frontend/src/app/chat/chatbox.component.ts", "pattern": "/^          const list = d && typeof d.querySelector === 'function' ? d.querySelector('.messages')/", "language": "TypeScript", "kind": "constant", "scope": "ChatboxComponent.send", "scopeKind": "method"}, {"_type": "tag", "name": "messages", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-retrieval-and-control-30006-30015/faq_chatbox_frontend/src/app/chat/chatbox.component.ts", "pattern": "/^  messages: ChatMessage[] = [$/", "language": "TypeScript", "kind": "property", "scope": "ChatboxComponent", "scopeKind": "class"}, {"_type": "tag", "name": "ngOnDestroy", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-retrieval-and-control-30006-30015/faq_chatbox_frontend/src/app/chat/chatbox.component.ts", "pattern": "/^  ngOnDestroy(): void {$/", "language": "TypeScript", "kind": "method", "scope": "ChatboxComponent", "scopeKind": "class"}, {"_type": "tag", "name": "platformId", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-retrieval-and-control-30006-30015/faq_chatbox_frontend/src/app/chat/chatbox.component.ts", "pattern": "/^    @Inject(PLATFORM_ID) private platformId: Object$/", "language": "TypeScript", "kind": "property", "scope": "ChatboxComponent", "scopeKind": "class"}, {"_type": "tag", "name": "raf", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-retrieval-and-control-30006-30015/faq_chatbox_frontend/src/app/chat/chatbox.component.ts", "pattern": "/^        const raf: (cb: () => void) => void =$/", "language": "TypeScript", "kind": "constant", "scope": "ChatboxComponent.send", "scopeKind": "method"}, {"_type": "tag", "name": "rag", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-retrieval-and-control-30006-30015/faq_chatbox_frontend/src/app/chat/chatbox.component.ts", "pattern": "/^    private rag: RagService,$/", "language": "TypeScript", "kind": "property", "scope": "ChatboxComponent", "scopeKind": "class"}, {"_type": "tag", "name": "response", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-retrieval-and-control-30006-30015/faq_chatbox_frontend/src/app/chat/chatbox.component.ts", "pattern": "/^      const response = await this.rag.ask(text, { topic: this.activeTopic ?? undefined });$/", "language": "TypeScript", "kind": "constant", "scope": "ChatboxComponent.send", "scopeKind": "method"}, {"_type": "tag", "name": "send", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-retrieval-and-control-30006-30015/faq_chatbox_frontend/src/app/chat/chatbox.component.ts", "pattern": "/^  async send() {$/", "language": "TypeScript", "kind": "method", "scope": "ChatboxComponent", "scopeKind": "class"}, {"_type": "tag", "name": "sending", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-retrieval-and-control-30006-30015/faq_chatbox_frontend/src/app/chat/chatbox.component.ts", "pattern": "/^  sending = false;$/", "language": "TypeScript", "kind": "property", "scope": "ChatboxComponent", "scopeKind": "class"}, {"_type": "tag", "name": "sub", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-retrieval-and-control-30006-30015/faq_chatbox_frontend/src/app/chat/chatbox.component.ts", "pattern": "/^  private sub: any;$/", "language": "TypeScript", "kind": "property", "scope": "ChatboxComponent", "scopeKind": "class"}, {"_type": "tag", "name": "text", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-retrieval-and-control-30006-30015/faq_chatbox_frontend/src/app/chat/chatbox.component.ts", "pattern": "/^    const text = this.input.trim();$/", "language": "TypeScript", "kind": "constant", "scope": "ChatboxComponent.send", "scopeKind": "method"}, {"_type": "tag", "name": "topicsBridge", "path": "/home/kavia/workspace/code-generation/ai-faq-assistant-with-retrieval-and-control-30006-30015/faq_chatbox_frontend/src/app/chat/chatbox.component.ts", "pattern": "/^    private topicsBridge: TopicsBridgeService,$/", "language": "TypeScript", "kind": "property", "scope": "ChatboxComponent", "scopeKind": "class"}], "hash": "a2249f312eae74c56bcdc356816f09b0", "format-version": 4, "code-base-name": "faq_chatbox_frontend", "filename": "faq_chatbox_frontend/src/app/chat/chatbox.component.ts", "fields": [{"name": "private activeTopic: string | null = null;", "scope": "ChatboxComponent", "scopeKind": "class", "description": "unavailable"}, {"name": "input = '';", "scope": "ChatboxComponent", "scopeKind": "class", "description": "unavailable"}, {"name": "messages: ChatMessage[] = [", "scope": "ChatboxComponent", "scopeKind": "class", "description": "unavailable"}, {"name": "@Inject(PLATFORM_ID) private platformId: Object", "scope": "ChatboxComponent", "scopeKind": "class", "description": "unavailable"}, {"name": "private rag: RagService,", "scope": "ChatboxComponent", "scopeKind": "class", "description": "unavailable"}, {"name": "sending = false;", "scope": "ChatboxComponent", "scopeKind": "class", "description": "unavailable"}, {"name": "private sub: any;", "scope": "ChatboxComponent", "scopeKind": "class", "description": "unavailable"}, {"name": "private topicsBridge: TopicsBridgeService,", "scope": "ChatboxComponent", "scopeKind": "class", "description": "unavailable"}]}